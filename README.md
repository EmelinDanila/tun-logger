# TUN Logger

Программа для перехвата и логирования TCP/UDP-трафика через TUN-интерфейс на Windows.

---

## Что делает
- Создает TUN-интерфейс `tunlogger`.
- Ловит пакеты IPv4 (TCP/UDP).
- Извлекает:
  - IP отправителя и получателя.
  - Порты отправителя и получателя.
- Логирует в `packets.log`:
  - Время, IP, порты, протокол.
  - Байты пакетов (hex).

---

## Установка
1. Клонируйте репозиторий:

   ```bash
   git clone <repository-url>
   cd tunlogger
   ```

2. Установите зависимости:

   ```bash
   go mod tidy
   ```

3. Соберите и запустите:

   ```bash
   make run
   ```

4. Удаление бинарника:

   ```bash
   make clean
   ```

---

## Команды Makefile
- `make build` — сборка `tunlogger.exe`.
- `make run` — сборка + запуск.
- `make clean` - удаление `tunlogger.exe`.

---

## Пример логов

```
2025/04/07 21:32:55 [21:32:55] 10.0.0.1 -> 224.0.0.251 [UDP] UDP ports 5353 -> 5353
Payload:
00000000  00 00 00 00 00 01 00 00  00 00 00 00 0f 4c 41 50  |.............LAP|

2025/04/07 21:32:25 [21:32:25] 10.0.0.1 -> 10.0.0.2 [TCP] TCP ports 50537 -> 5201
Payload:
Нет данных прикладного слоя
```

---

## Как проверить
1. Запустите: `make run`
2. Настройте трафик через `tunlogger` (например, `route add`)
3. Отправьте пакеты (ping, iperf)
4. Читайте `packets.log`

---

## Зависимости
- `github.com/google/gopacket`
- `golang.zx2c4.com/wintun`
- `wintun.dll` (Уже включен в репозиторий)

---

## Требования
- Windows
- Go 1.16+
- Права администратора

---
